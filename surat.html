<!DOCTYPE html>
<html lang="id">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta charset="UTF-8">
  <title>Surat Buat Nona üíå</title>

  <!-- GOOGLE FONTS -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      height: 100vh;
      background:
        linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)),
        url("bg.jpg");
      background-size: cover;
      background-position: center;
      backdrop-filter: blur(3px);
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Inter', sans-serif;
      overflow: hidden;
    }

    .card {
      background: rgba(255,255,255,0.96);
      padding: 32px;
      border-radius: 22px;
      width: 90%;
      max-width: 430px;
      box-shadow: 0 25px 50px rgba(0,0,0,0.35);
      text-align: center;
      position: relative;
      z-index: 10;
    }

.fade-out {
  animation: fadeOut 1.5s forwards;
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

    h2 {
      font-family: 'Playfair Display', serif;
      margin: 0;
      font-size: 26px;
    }

    /* KOTAK TEKS */
    .text-box {
  margin-top: 22px;
  border: 2px solid #f2b6c6;
  border-radius: 16px;
  background: rgba(255,255,255,0.92);
  overflow: hidden;
}

/* FOTO */
.photo-box {
  width: 100%;
  height: 240px;
  background: #eee;
}

.photo-box img {
  width: 100%;
  height: auto;
  display: block;
  object-fit: cover;
  object-position: center top;
}

/* TEKS */
.text-content {
  padding: 18px 20px;
  min-height: 120px;
  max-height: 180px;
  overflow-y: auto;
  font-size: 16px;
  font-weight:600;
  line-height: 1.7;
  color: #333;
  white-space: pre-wrap;
  text-shadow: 0 1px 2px rgba(255,255,255,0.5);
}

/* border nyala saat ngetik */
.typing {
  border-color: #ff6b81;
}


    .days {
      margin-top: 18px;
      font-size: 14px;
      color: #555;
    }

    .hint {
      margin-top: 12px;
      font-size: 12px;
      color: #888;
    }

/* === HUJAN HATI === */
.falling-heart {
  position: fixed;
  top: -20px;
  font-size: 18px;
  color: rgba(255, 105, 135, 0.6);
  animation: fall 8s linear forwards, sway 3s ease-in-out infinite;
  pointer-events: none; /* PENTING */
  z-index: 1; /* DI BAWAH CARD */
}

@keyframes fall {
  0% {
    transform: translateX(0) translateY(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateX(40px) translateY(110vh) rotate(360deg);
    opacity: 0;
  }
}

/* ================= MOBILE RESPONSIVE ================= */
@media (max-width: 480px) {

  body {
    padding: 12px;
  }

  .card {
    width: 100%;
    max-width: 100%;
    padding: 22px;
    border-radius: 18px;
  }

  h2 {
    font-size: 22px;
  }

  .photo-box {
    height: 200px; /* biar foto nggak kepotong di HP */
    aspect-ratio: 4 / 5;
  }

  .text-box {
    font-size: 15px;
    line-height: 1.6;
    min-height: 200px;
  }

  .end-text {
    font-size: 22px;
    padding: 20px;
    text-align: center;
  }

  .replay-btn {
    margin-top: 18px;
    padding: 10px 20px;
    font-size: 14px;
  }
}
/* === POPUP CINEMATIC === */
.popup-nav{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  display:flex;
  justify-content:center;
  align-items:center;
  opacity:0;
  pointer-events:none;
  transition:opacity 2s ease;
  z-index:99999;
}

.popup-nav.show{
  opacity:1;
  pointer-events:auto;
}

.popup-box{
  background:white;
  padding:28px;
  border-radius:22px;
  text-align:center;
  animation:popupIn 1.2s ease;
}

@keyframes popupIn{
  from{transform:scale(.8);opacity:0}
  to{transform:scale(1);opacity:1}
}

.popup-box button{
  margin:8px;
  padding:10px 18px;
  border:none;
  border-radius:18px;
  background:#ff6b81;
  color:white;
  cursor:pointer;
}

  </style>
<style>
  body {

  /* === TAMBAHKAN INI DI DALAM STYLE === */
  .end-text {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Playfair Display', serif;
  font-size: 30px;
  color: white;
  background: rgba(0,0,0,0.75);
  opacity: 0;
  transition: opacity 2.5s ease;
  z-index: 9999; /* PALING ATAS */
}


  .end-text.show {
    opacity: 1;
.replay-btn {
  margin-top: 20px;
  padding: 10px 22px;
  border-radius: 20px;
  border: none;
  background: #ff6b81;
  color: white;
  font-size: 14px;
  cursor: pointer;
  opacity: 0.85;
}
.replay-btn:hover {
  opacity: 1;
}

  }
</style>

</head>
<body>
<div id="ending" class="end-text">
  <div>
    Untukmu, yang diam-diam selalu ku doakan ü§ç<br>
    <button class="replay-btn" onclick="location.reload()">Baca Ulang</button>
  </div>
</div>

<audio id="bgm" loop>
  <source src="somebody-pleasure.mp3" type="audio/mpeg">
</audio>

<div class="card">
  <h2>Untuk Kamu ü§ç</h2>
 <div class="text-box">
  <div class="photo-box">
    <img src="dia.jpg" alt="Dia">
  </div>
  <div id="text" class="text-content"></div>
</div> 
  <div id="days" class="days"></div>
  <div class="hint">sentuh layar sekali üíñ</div>
</div>
<!-- === POPUP NAVIGASI (TAMBAHAN) === -->
<div id="popupNav" class="popup-nav">
  <div class="popup-box">
    <h3>Apa langkah selanjutnya? ü§ç</h3>
    <button onclick="goNext('index.html')">üè† Index</button>
    <button onclick="goNext('game.html')">üéÆ Mini Game</button>
    <button onclick="goNext('galeri.html')">üñºÔ∏è Galeri</button>
  </div>
</div>
<script>

  /* ================= SURAT ================= */
  const messages = [
  "Pesan Kenangan Untuk mu üòä",
  "Aku mungkin nggak selalu pandai ngomong atau ngungkapin sesuatu.",
  "Kadang aku juga bingung harus mulai dari mana.",
  "Tapi satu hal yang aku yakin...",
  "Aku bersyukur banget bisa kenal dan deket sama kamu.",
  "Terima kasih karena kehadiran kamu selalu kasih warna di hari-hariku ü§ç",
  "Aku sayang kamu, dan aku berharap kamu selalu bahagia, dengan atau tanpa aku.",
  "Kapan pun itu, aku harap kita nggak jadi asing dan tetap bisa saling jaga.",
  "Dan kalau suatu hari kamu butuh tempat cerita...",
  "Aku tetap Arfidi yang kamu kenal."
];


  let msgIndex = 0;
  let charIndex = 0;
  const speed = 100;   // sangat tenang, cocok lagu mellow
  const delay = 3500; // lebih dramatis;
  const textBox = document.getElementById("text");

  function typeMessage() {
  textBox.classList.add("typing");

  if (charIndex < messages[msgIndex].length) {
    textBox.innerText += messages[msgIndex].charAt(charIndex);
    charIndex++;
    setTimeout(typeMessage, speed);
  } else {
    textBox.classList.remove("typing");

    setTimeout(() => {
      // beri efek menghilang
      textBox.classList.add("fade-out");

      setTimeout(() => {
        // bersihkan teks & lanjut
        textBox.classList.remove("fade-out");
        textBox.innerText = "";
        msgIndex++;
        charIndex = 0;

        if (msgIndex < messages.length) {
          typeMessage();
        } else {
          showEnding();
        }
      }, 1500); // durasi fade
    }, delay);
  }
}


  window.onload = typeMessage;
/* === POPUP LOGIC (TAMBAHAN) === */
function showPopupNav(){
  document.getElementById("popupNav").classList.add("show");
}

function goNext(page){
  document.body.classList.add("fade-out");
  setTimeout(()=>location.href=page,1200);
}

/* ENDING RAHASIA: TAP 3X */
let tapCount = 0;
document.body.addEventListener("click",()=>{
  tapCount++;
  if(tapCount === 3){
    alert("ü§ç Ending Rahasia\nKamu selalu punya tempat di ceritaku.");
  }
  setTimeout(()=>tapCount=0,1500);
});

  /* ================= MUSIK ================= */
  const audio = document.getElementById("bgm");
audio.volume = 0;
audio.play().catch(() => {});

document.body.addEventListener("click", () => {
  let v = 0;
  audio.volume = 0;
  audio.play();

  const fade = setInterval(() => {
    if (v < 0.6) {
      v += 0.05;
      audio.volume = v;
    } else {
      clearInterval(fade);
    }
  }, 200);
}, { once: true });


  /* ================= HITUNG HARI JADIAN ================= */
  const startDate = new Date("2023-08-15"); // GANTI TANGGAL JADIAN
  const today = new Date();
  const diffTime = today - startDate;
  const daysTogether = Math.floor(diffTime / (1000 * 60 * 60 * 24));

  document.getElementById("days").innerText =
  "Beberapa hari sederhana yang terasa berarti ü§ç";

function showEnding() {
  const end = document.getElementById("ending");

  // tampilkan ending
  setTimeout(() => {
    end.classList.add("show");
  }, 2500);

  // fade musik tapi TIDAK berhenti
  let v = audio.volume;
  const fadeSoft = setInterval(() => {
    if (v > 0.15) {
      v -= 0.02;
      audio.volume = v;
    } else {
      clearInterval(fadeSoft);
    }
  }, 400);
setTimeout(showPopupNav, 6000);
}

/* ===== HUJAN HATI AMAN ===== */
function createFallingHeart() {
  const heart = document.createElement("div");
  heart.className = "falling-heart";
  heart.innerText = "üíó";

  heart.style.left = Math.random() * 100 + "vw";
  heart.style.fontSize = (12 + Math.random() * 14) + "px";
  heart.style.animationDuration = (6 + Math.random() * 4) + "s";

  document.body.appendChild(heart);

  setTimeout(() => {
    heart.remove();
  }, 10000);
}

setInterval(createFallingHeart, 1200);

</script>

</body>
</html>
